<odoo>
  <template id="report_sales_detail" name="Report Sales Detail">
    <!-- <t t-set="o_portal_fullwidth_alert">
      <t t-call="dev_pos.portal_back_in_edit_mode"/>
    </t> -->

    <t t-call="portal.portal_layout">
        <div class="o_portal_my_doc table-responsive">
          <!-- <t t-call="portal.portal_record_sidebar">
            <div class="d-flex flex-column gap-4 mt-3">
              <div class="d-flex flex-column gap-2"> -->
          <div class="o_download_pdf d-flex flex-lg-column flex-xl-row flex-wrap gap-2">
            <a t-att-href="'/my/sales/report/detail/pdf?date_from=%s&amp;date_to=%s' % (date_from, date_to)"
              class="btn btn-primary mb-3">
              <i class="fa fa-download"/> Download PDF
            </a>
          </div>
              <!-- </div>
            </div>
          </t> -->

          <div class="o_portal_content col-12 col-lg-8 col-xxl-9">
            <div class="o_portal_html_view position-relative bg-white shadow overflow-hidden">
                <!-- <div class="o_portal_html_loader text-center">
                  <i class="fa fa-circle-o-notch fa-spin fa-2x fa-fw text-black-50"></i>
                </div> -->
                <!-- <iframe id="invoice_html" class="position-relative d-block" width="100%" height="100%" frameborder="0" scrolling="no" t-att-src="invoice.get_portal_url(report_type='html')"/>
            </div> -->

                <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
                <h5 class="text-center">Laporan Penjualan</h5>
                <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

                <table class="table table-bordered table-sm">
                  <thead class="table-secondary">
                    <tr>
                      <th>No</th>
                      <th>Nomor Faktur</th>
                      <th>Nomor Order</th>
                      <th>Session</th>
                      <th>Lokasi</th>
                      <th>Tanggal</th>
                      <th>Jatuh Tempo</th>
                      <th>Customer</th>
                    </tr>
                  </thead>
                  <tbody>
                    <t t-set="counter" t-value="1"/>
                    <t t-foreach="orders" t-as="order">
                      <tr>
                        <td><t t-esc="counter"/></td>
                        <td><t t-esc="order.account_move.name or ''"/></td>
                        <td><t t-esc="order.name or ''"/></td>
                        <td><t t-esc="order.session_id.name or ''"/></td>
                        <td><t t-esc="order.config_id.name"/></td>
                        <td><t t-esc="order.date_order.strftime('%d/%m/%Y %H:%M')"/></td>
                        <td><t t-esc="order.date_order.strftime('%d/%m/%Y')"/></td>
                        <td><t t-esc="order.partner_id.name or ''"/></td>
                      </tr>

                      <tr>
                        <td></td>
                        <td colspan="6">
                          <table class="table table-bordered table-sm mb-0">
                            <thead>
                              <tr class="table-light">
                                <th>Produk</th>
                                <th>Qty</th>
                                <th>Harga</th>
                                <th>Disc %</th>
                                <th>Subtotal</th>
                              </tr>
                            </thead>
                            <tbody>
                              <t t-foreach="order.lines" t-as="line">
                                <tr>
                                  <td><t t-esc="line.product_id.display_name"/></td>
                                  <td class="text-end"><t t-esc="line.qty"/></td>
                                  <td class="text-end"><t t-esc="line.price_unit"/></td>
                                  <td class="text-end"><t t-esc="line.discount"/></td>
                                  <td class="text-end"><t t-esc="line.price_subtotal_incl"/></td>
                                </tr>
                              </t>
                              <tr>
                                <td colspan="4" class="text-end"><b>Total</b></td>
                                <td class="text-end"><b><t t-esc="order.amount_total"/></b></td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                      <t t-set="counter" t-value="counter + 1"/>
                    </t>
                  </tbody>
                </table>

            </div>
          </div>  
        </div> 
        
    </t>
  </template>

  <!-- Template Portal -->
  <template id="portal_contribution_report_template" name="Contribution Report by Category">
      <t t-call="portal.portal_layout">
          <div class="o_portal_my_doc table-responsive">
              <h3>Report Contribution by Category</h3>
              <p>Periode: <t t-esc="date_from"/> s/d <t t-esc="date_to"/></p>

              <a t-att-href="'/my/sales/report/contribution_by_category/pdf?date_from=%s&amp;date_to=%s' % (date_from, date_to)"
                  class="btn btn-primary mb-3">
                  <i class="fa fa-download"/> Download PDF
              </a>

              <table class="table table-bordered">
                  <thead>
                      <tr>
                          <th>No</th>
                          <th>Order</th>
                          <th>Customer</th>
                          <th>Tanggal</th>
                          <th>Total</th>
                      </tr>
                  </thead>
                  <tbody>
                      <t t-foreach="orders" t-as="order" t-esc-options='{"widget": "text"}'>
                          <tr>
                              <td><t t-esc="order.id"/></td>
                              <td><t t-esc="order.name"/></td>
                              <td><t t-esc="order.partner_id.name"/></td>
                              <td><t t-esc="order.date_order"/></td>
                              <td><t t-esc="order.amount_total"/></td>
                          </tr>
                      </t>
                  </tbody>
              </table>
          </div>
      </t>
  </template>





































  

  <template id="report_sales_recap" name="Report Sales Recap">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan Penjualan</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <table class="table table-bordered table-sm">
          <thead class="table-secondary">
            <tr>
              <th>No</th>
              <th>Nomor Faktur</th>
              <th>Nomor Order</th>
              <th>Session</th>
              <th>Lokasi</th>
              <th>Tanggal</th>
              <th>Customer</th>
              <th>Quantity</th>
              <th>Nominal</th>
            </tr>
          </thead>
          <tbody>
            <t t-set="counter" t-value="1"/>
            <t t-foreach="orders" t-as="order">
              <tr>
                <td><t t-esc="counter"/></td>
                <td><t t-esc="order.account_move.name or ''"/></td>
                <td><t t-esc="order.name or ''"/></td>
                <td><t t-esc="order.session_id.name or ''"/></td>
                <td><t t-esc="order.config_id.name"/></td>
                <td><t t-esc="order.date_order.strftime('%d/%m/%Y %H:%M')"/></td>
                <td><t t-esc="order.partner_id.name or ''"/></td>
                <td><t t-esc="sum(order.lines.mapped('qty') or [0])"/></td>
                <td><t t-esc="sum(order.lines.mapped('price_subtotal_incl') or [0])"/></td>
              </tr>
              <t t-set="counter" t-value="counter + 1"/>
            </t>
          </tbody>
        </table>
      </div>
    </t>
  </template>

  <template id="report_sales_spending" name="Report Sales Spending">
    <t t-call="web.html_container">
      <style>
        .page {
          margin-bottom: 40px;
          page-break-after: always;
        }
        @media print {
          thead { display: table-header-group; }
          tfoot { display: table-footer-group; }
          tr { page-break-inside: avoid; }
        }
        /* Scroll horizontal di web */
        .table-responsive {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      </style>

      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="rows_per_page" t-value="20"/>
        <t t-set="pages" t-value="[]"/>
        <t t-set="page" t-value="[]"/>

        <t t-foreach="data_rows" t-as="row">
          <t t-if="len(page) &lt; rows_per_page">
            <t t-set="page" t-value="page + [row]"/>
          </t>
          <t t-else="">
            <t t-set="pages" t-value="pages + [page]"/>
            <t t-set="page" t-value="[row]"/>
          </t>
        </t>
        <t t-if="page">
          <t t-set="pages" t-value="pages + [page]"/>
        </t>

        <!-- Loop halaman -->
        <t t-foreach="pages" t-as="p">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Nomor</th>
                    <th>Nama</th>
                    <t t-foreach="tanggal_list" t-as="tgl">
                      <th>Qty-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Trx-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Sales-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-set="counter" t-value="1"/>
                  <t t-foreach="p" t-as="row">
                    <tr>
                      <td><t t-esc="counter"/></td>
                      <td><t t-esc="row['label']"/></td>
                      <t t-foreach="tanggal_list" t-as="tgl">
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_qty', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_trx', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_sales', '')"/></td>
                      </t>
                    </tr>
                    <t t-set="counter" t-value="counter + 1"/>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <template id="report_sales_hourly" name="Report Sales Hourly">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Jam</th>
                    <t t-foreach="chunk" t-as="tgl">
                      <th>Qty-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Trx-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Sales-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-set="counter" t-value="1"/>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="counter"/></td>
                      <t t-foreach="chunk" t-as="tgl">
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_qty', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_trx', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_sales', '')"/></td>
                      </t>
                    </tr>
                    <t t-set="counter" t-value="counter + 1"/>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <template id="report_sales_hourly_category" name="Report Sales Hourly Category">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Kategori</th>
                    <t t-foreach="jam_list" t-as="jam">
                      <th>Qty-<t t-esc="jam"/></th>
                      <th>Trx-<t t-esc="jam"/></th>
                      <th>Sales-<t t-esc="jam"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="row['kategori']"/></td>
                      <t t-foreach="jam_list" t-as="jam">
                        <td><t t-esc="row.get(jam+'_qty', '')"/></td>
                        <td><t t-esc="row.get(jam+'_trx', '')"/></td>
                        <td><t t-esc="row.get(jam+'_sales', '')"/></td>
                      </t>
                    </tr>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <!-- <template id="report_sales_hourly_payment" name="Report Sales Hourly Payment">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Kategori</th>
                    <t t-foreach="jam_list" t-as="jam">
                      <th>Qty-<t t-esc="jam"/></th>
                      <th>Trx-<t t-esc="jam"/></th>
                      <th>Sales-<t t-esc="jam"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="row['kategori']"/></td>
                      <t t-foreach="jam_list" t-as="jam">
                        <td><t t-esc="row.get(jam+'_qty', '')"/></td>
                        <td><t t-esc="row.get(jam+'_trx', '')"/></td>
                        <td><t t-esc="row.get(jam+'_sales', '')"/></td>
                      </t>
                    </tr>
                  </t>
                </tbody>
          </table>
        </div>
      </div>
    </t>
  </template> -->

</odoo>
