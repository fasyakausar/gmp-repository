<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
  <!-- Main Barcode Scanner Template -->
  <t t-name="integrasi_pos.BarcodeScannerCameraSelector" owl="1">
    <div class="barcode-scanner-widget d-flex flex-column gap-3">

      <!-- Camera Selector -->
      <div>
        <label class="form-label">Pilih Kamera:</label>
        <select t-on-change="onChangeCamera" class="form-select">
          <t t-foreach="state.devices" t-as="device" t-key="device.id">
            <option t-att-value="device.id" t-att-selected="device.id === state.selectedDeviceId">
              <t t-esc="device.label"/>
            </option>
          </t>
        </select>
      </div>

      <!-- Scanner Preview Box -->
      <div class="camera-container">
        <div t-ref="reader"
             id="barcode-scanner-reader"
             class="barcode-camera-box">
        </div>
      </div>

      <!-- Status Info -->
      <div t-if="state.waitingForQuantity" class="alert alert-info">
        <i class="fa fa-info-circle"></i> Menunggu input quantity untuk barcode: <strong t-esc="state.currentBarcode"/>
      </div>

      <!-- Button Controls -->
      <div class="d-flex flex-wrap gap-2 justify-content-start">
        <button t-if="!state.scanning and !state.waitingForQuantity"
                t-on-click="startScanning"
                class="btn btn-primary">
          ğŸ¥ Start Scanning
        </button>

        <button t-if="state.scanning and !state.waitingForQuantity"
                t-on-click="stopScanning"
                class="btn btn-danger">
          ğŸ›‘ Stop Scanning
        </button>

        <div t-if="state.waitingForQuantity" class="btn btn-warning disabled">
          â¸ï¸ Paused - Input Quantity
        </div>
      </div>

    </div>
  </t>
</templates>